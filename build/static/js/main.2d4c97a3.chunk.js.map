{"version":3,"sources":["services/phonebook.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseURL","axios","get","then","response","data","person","post","id","delete","Filter","handler","value","onChange","PersonForm","props","nameHandler","name","phoneHandler","phone","onClick","addHandler","type","Persons","people","handleDelete","map","key","number","Notification","notification","className","message","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchTerm","setSearchTerm","setNotification","useEffect","phoneBook","initialData","createNotification","setTimeout","peopleToShow","filter","toLowerCase","includes","event","target","preventDefault","find","newPerson","concat","deletedPerson","window","confirm","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2d4c97a3.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseURL =\n  process.env.NODE_ENV === 'production'\n    ? '/api/persons'\n    : 'http://localhost:3001/api/persons';\n\nconst getAll = () => {\n  return axios.get(baseURL).then((response) => response.data);\n};\n\nconst createPerson = (person) => {\n  return axios.post(baseURL, person).then((response) => response.data);\n};\n\nconst updatePerson = (id, person) => {\n  return axios\n    .put(`${baseURL}/${id}`, person)\n    .then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  return axios.delete(`${baseURL}/${id}`).then((response) => response.data);\n};\n\nexport default {\n  getAll,\n  createPerson,\n  updatePerson,\n  deletePerson,\n};\n","import React from 'react';\n\nconst Filter = ({ handler, value }) => {\n  return (\n    <div>\n      <div>\n        filter shown with\n        <input onChange={handler} value={value} />\n      </div>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = (props) => {\n  return (\n    <form>\n      <div>\n        name: <input onChange={props.nameHandler} value={props.name} />\n      </div>\n      <div>\n        number: <input onChange={props.phoneHandler} value={props.phone} />\n      </div>\n      <div>\n        <button onClick={props.addHandler} type=\"submit\">\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ people, handleDelete }) => {\n  return (\n    <div>\n      {people.map((person) => (\n        <p key={person.name}>\n          {person.name} {person.number}{' '}\n          <button onClick={handleDelete(person)}>delete</button>\n        </p>\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = ({ notification }) => {\n  if (notification === null) {\n    return null;\n  }\n\n  return <div className={notification.type}>{notification.message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport phoneBook from './services/phonebook';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [notification, setNotification] = useState(null);\n\n  useEffect(() => {\n    phoneBook.getAll().then((initialData) => {\n      setPersons(initialData);\n    });\n  }, []);\n\n  const reset = () => {\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handlePhoneChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const handleAdd = (event) => {\n    event.preventDefault();\n\n    let existingPerson = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase(),\n    );\n\n    if (existingPerson) {\n      createNotification(`${newName} is already in the phonebook`, 'error');\n      // const updatePerson = window.confirm(\n      //   `${newName} is already added to the phonebook, replace the old number with a new one?`,\n      // );\n\n      // if (updatePerson) {\n      //   const personObject = {\n      //     ...existingPerson,\n      //     number: newNumber,\n      //   };\n\n      //   phoneBook\n      //     .updatePerson(existingPerson.id, personObject)\n      //     .then((updatedPerson) => {\n      //       createNotification(\n      //         `Number of ${existingPerson.name} changed`,\n      //         'success',\n      //       );\n      //       setPersons(\n      //         persons.map((person) =>\n      //           person.id !== updatedPerson.id ? person : updatedPerson,\n      //         ),\n      //       );\n      //     });\n      // }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      };\n      phoneBook.createPerson(personObject).then((newPerson) => {\n        createNotification(`Added ${newName}`, 'success');\n        setPersons(persons.concat(newPerson));\n      });\n    }\n\n    reset();\n  };\n\n  const handleDelete = (deletedPerson) => () => {\n    const confirmDelete = window.confirm(`Delete ${deletedPerson.name}?`);\n    if (confirmDelete) {\n      phoneBook\n        .deletePerson(deletedPerson.id)\n        .then(() => {\n          createNotification(\n            `Information of ${deletedPerson.name} is successfully removed from server`,\n            'success',\n          );\n          setPersons(\n            persons.filter((person) => person.id !== deletedPerson.id),\n          );\n        })\n        .catch(() => {\n          createNotification(\n            `Information of ${deletedPerson.name} has already been removed from server`,\n            'error',\n          );\n          setPersons(\n            persons.filter((person) => person.id !== deletedPerson.id),\n          );\n        });\n    }\n  };\n\n  const createNotification = (message, type) => {\n    setNotification({ message, type });\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  const peopleToShow = persons.filter((person) =>\n    person.name.toLowerCase().includes(searchTerm),\n  );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification notification={notification} />\n      <Filter handler={handleSearchChange} value={searchTerm} />\n      <h2>add a new</h2>\n      <PersonForm\n        nameHandler={handleNameChange}\n        name={newName}\n        phoneHandler={handlePhoneChange}\n        phone={newNumber}\n        addHandler={handleAdd}\n      />\n      <h2>Numbers</h2>\n      <Persons people={peopleToShow} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}